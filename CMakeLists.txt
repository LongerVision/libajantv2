cmake_minimum_required(VERSION 3.10)

project(libajantv2)

set(CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake/")

include(CMakeOptions)
include(CompileFlags)
include(Defines)
include(Helpers)
include(Version)

option(AJANTV2_BUILD_OPENSOURCE "Build libajantv2 as open-source (MIT license)?" OFF)
option(AJANTV2_BUILD_SHARED     "Build libajantv2 shared libraries?" OFF)
option(AJANTV2_BUILD_DEMOS      "Build libajantv2 demo apps?" ON)
option(AJANTV2_BUILD_TOOLS      "Build libajantv2 tools?" ON)
option(AJANTV2_BUILD_TESTS      "Build libajantv2 tests?" ON)
option(AJANTV2_BUILD_DOCS       "Build libajantv2 docs?" OFF)

add_subdirectory(ajantv2)
if (AJANTV2_BUILD_DEMOS)
    add_subdirectory(demos)
endif()
if (AJANTV2_BUILD_TOOLS)
    add_subdirectory(tools)
endif()
if (AJANTV2_BUILD_TESTS)
    include(CTest)
    if (NOT TARGET doctest::doctest)
        set (DOCTEST_PATH ${CMAKE_SOURCE_DIR}/thirdparty/doctest)
        add_subdirectory(${DOCTEST_PATH})
	include(${DOCTEST_PATH}/scripts/cmake/doctest.cmake)
    endif()
    add_subdirectory(ajantv2/test)
endif()
